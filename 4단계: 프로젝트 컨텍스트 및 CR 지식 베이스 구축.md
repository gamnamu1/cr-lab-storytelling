# 작업: 프로젝트 컨텍스트 및 CR 지식 베이스 구축

## 배경
이 소설 창작 시스템은 CR(Checking the News Reliability) 프로젝트의 일환입니다.
소설을 통해 언론 개혁의 당위를 전달하되, 직접적 홍보가 아닌 서사적 공감을 이끌어내는 것이 목표입니다.

모든 에이전트가 공유하는 핵심 맥락(`project_context.md`)과 
필요시 참조하는 상세 자료(`references/cr-knowledge/`)를 구축합니다.

---

## 작업 1: 디렉토리 구조 생성
```bash
mkdir -p workflow/references/cr-knowledge
```

최종 구조:
```
workflow/
├── project_context.md          ← 신규: 핵심 철학 (모든 에이전트 공유)
├── references/
│   └── cr-knowledge/           ← 신규: 상세 참조 자료
│       ├── 01-problem-awareness.md   (문제의식)
│       ├── 02-journalism-reality.md  (언론 현실)
│       ├── 03-problematic-patterns.md (문제적 보도 패턴)
│       └── 04-citizen-solution.md    (시민 주도 해결책)
├── agents/
├── outputs/
└── run.py
```

---

## 작업 2: `workflow/project_context.md` 생성

이 파일은 **모든 에이전트가 작업 시작 전 자동으로 참조**합니다.
```markdown
# 프로젝트 컨텍스트

## 이 소설 프로젝트의 존재 이유

이 소설들은 CR(Checking the News Reliability) 프로젝트의 일환으로 창작됩니다.
CR은 시민이 주도하는 언론 개혁 운동입니다.

### CR의 핵심 아이디어

> **언론인 스스로 만든 '언론윤리규범'을 근거로,
> 시민들이 직접 뉴스의 품질을 묻고 확인한다.**

한국기자협회 윤리강령, 신문윤리강령, 인권보도준칙 등 
언론계가 스스로 정한 원칙들이 존재합니다.
문제는, 아무도 그 규범이 지켜지는지 묻지 않는다는 것입니다.

CR은 이 규범들을 기준으로 기사를 분석하고,
시민들이 "이 기사는 언론윤리에 비추어 어떤가?"를 직접 확인할 수 있게 합니다.

### CR이 의미하는 것

- **C**ritical Readers: 비판적으로 읽는 독자
- **C**itizen **R**eviewers: 시민 검토자
- **C**ivic **R**eformers: 시민 개혁가

### 왜 소설인가

언론 문제를 직접 설명하는 것은 쉽습니다.
하지만 사람들은 설명보다 **이야기**에 공감합니다.

이 소설들은:
- 언론 현실을 생생하게 **체험**하게 합니다
- 독자가 스스로 "왜 변화가 필요한가"를 **느끼게** 합니다
- 직접적 주장 없이, 서사를 통해 **질문을 던집니다**

---

## 창작 원칙

### 1. 프로파간다가 아닌 문학
- CR을 직접 홍보하거나 언급하지 않습니다
- 특정 해결책을 제시하기보다 문제를 느끼게 합니다
- 답을 주기보다 질문을 던집니다

### 2. 현실의 충실한 재현
- 언론 문제를 균형 있게, 다층적으로 그립니다
- 체제 내부자와 비판자, 피해자의 시선을 모두 담습니다
- 클리셰가 아닌 실제 현장의 디테일을 살립니다

### 3. 인간에 대한 공감
- 체제를 비판하되, 그 안의 인간은 입체적으로 그립니다
- 기자도, 편집자도, 사주도 각자의 논리와 고민이 있습니다
- 선악 이분법을 넘어 구조적 딜레마를 보여줍니다

### 4. 열린 결말
- 명쾌한 해결보다 여운을 남깁니다
- 독자가 읽은 후 스스로 생각하게 합니다
- "그래서 어떻게 해야 하지?"라는 질문이 남도록 합니다

---

## 에이전트별 활용 지침

### 철학자 (Philosopher)
- CR의 문제의식을 화두의 **출발점**으로 삼으세요
- "시민의 알 권리", "미디어 리터러시", "언론의 공공성"을 탐구하세요
- 단, CR 자체를 주제로 삼지 마세요. 더 보편적인 화두로 확장하세요

### 리서처 (Domain Expert)
- 언론 도메인 작업 시, `references/cr-knowledge/` 자료를 참조하세요
- 문제적 보도 패턴의 구체적 사례들을 활용하세요
- 언론 현장의 감각적 디테일을 풍부하게 제공하세요

### 소설가 A (Novelist-Creator)
- CR이 다루는 현실을 이야기의 **배경**으로 삼으세요
- CR 자체는 등장하지 않아도 됩니다
- 기자, 편집자, 독자, 피해자의 이야기를 통해 현실을 보여주세요

### 소설가 B (Novelist-Critic)
- 이야기가 특정 방향으로 설교하고 있지 않은지 점검하세요
- 균형과 입체성이 유지되는지 확인하세요

### 편집자 (Editor)
- 기존 역할 그대로 수행하세요

### 비평가 (Literary Critic)
- 완성된 이야기가 CR의 목적에 부합하는지 점검하세요:
  - 설교 없이 공감을 이끌어내는가?
  - 독자가 스스로 질문하게 만드는가?
  - 언론 현실을 진정성 있게 그렸는가?

---

## 상세 참조 자료

더 구체적인 정보가 필요할 때 `references/cr-knowledge/` 폴더를 참조하세요:

| 파일 | 내용 | 활용 |
|------|------|------|
| `01-problem-awareness.md` | 왜 언론 개혁이 필요한가 | 배경, 동기 |
| `02-journalism-reality.md` | 권력 유착, 자정능력 상실 | 갈등 구조 |
| `03-problematic-patterns.md` | 119개 문제적 보도 패턴 | 구체적 에피소드 |
| `04-citizen-solution.md` | 시민 주도 해결책의 철학 | 희망의 단초 |
```

---

## 작업 3: 상세 참조 자료 생성

### 3-1: `references/cr-knowledge/01-problem-awareness.md`
```markdown
# 문제의식: 왜 언론 개혁이 필요한가

## 언론과 이데올로기

우리 의식 깊이 뿌리내린 통념과 고정관념은 교육을 통해 '교양과 상식'이라는 이름으로 학습되고, 
**언론을 통해 내면화**된다. 이 과정은 너무나 자연스러워 우리는 그 영향력을 잘 인지하지 못한다.

> "언론을 바꿔야 사회 통념, 고정관념, 이데올로기를 깰 수 있고, 다른 사회로 넘어갈 수 있다."

## 뉴스의 원천은 변하지 않았다

SNS, 유튜브 등 새로운 플랫폼이 등장했지만, 정보의 원천은 그다지 바뀌지 않았다.
유통되는 뉴스의 뿌리는 여전히 기성 미디어에 있다.

- 온라인 뉴스 대다수가 기성 미디어에서 출발
- 유튜브 콘텐츠도 기존 뉴스의 재가공이 대부분
- 뉴스 흐름의 본류를 바꾸지 않는 한, 진정한 변화는 어렵다

## 신뢰의 추락

2023년 로이터 저널리즘 연구소 조사:
**한국의 뉴스 신뢰도 28%, OECD 회원국 중 최하위**

'기레기'라는 멸칭이 일상화된 현실.
그럼에도 언론은 부끄러워하지 않는다.

## 소설적 활용

- 주인공이 언론에 환멸을 느끼는 계기
- "왜 세상은 바뀌지 않는가"라는 질문의 배경
- 미디어에 대한 불신이 일상화된 사회 묘사
```

### 3-2: `references/cr-knowledge/02-journalism-reality.md`
```markdown
# 언론 현실: 구조적 문제

## 권력과 한몸이 된 언론

신문사 사주 장남이 재벌기업 회장 딸과 결혼하고,
회장의 아들은 또 다른 족벌신문사 사주의 딸과 결혼한다.
정치, 경제, 언론 권력자들은 서로의 자녀들을 결혼시키며 권력의 고리를 강화한다.

### 공생적 카르텔의 작동 방식 (예: 부동산)

1. **언론**: 친기업 학자를 통해 "공급 부족", "규제 완화 필요" 여론 조성
2. **정부**: 언론이 조성한 여론을 근거로 재건축 조건 완화
3. **건설사**: 개발 사업 기회 획득, 대규모 광고로 언론에 수익 제공
4. **순환**: 이 구조가 반복되며 카르텔 강화

## 뉴스 가치 판단의 자의성

> "원래부터 뉴스 가치가 높은 사건이란 존재하지 않습니다. 
> 뉴스 가치는 사회적 권력 배치 속에서 상대적이고 가변적입니다."
> — 『세상은 어떻게 뉴스가 될까』

동물원 곰 부부의 출산 소식이 공중파 저녁 뉴스 앞부분에 주요 뉴스로 다뤄지는 현실.
뉴스 가치 판단이 얼마나 자의적일 수 있는지를 보여준다.

## 자정 능력의 상실

- 윤리 강령은 형식적 선언에 그침
- 대다수 기자들은 조직 논리에 길들여져 생활인으로 안주
- 언론사 안과 밖, 조직 구조 위아래 어디에도 내부 혁신 동력이 없음

## 전문가 비평의 한계

미디어오늘, 민언련, 언개련 등이 비평 역할을 하고 있지만:
- 24시간 쏟아지는 뉴스를 모두 검토하기 불가능
- 비평과 실제 보도 사이의 시간적 간극
- 비평 자체가 정파적으로 비칠 위험
- 가장 정밀한 비평조차 대중의 관심을 받지 못하고 사라짐

## 소설적 활용

- 기자 캐릭터의 내적 갈등: 이상 vs 조직 논리
- 편집국 정치, 광고주 압력, 자기검열의 구체적 장면
- "어쩔 수 없는 현실"로 합리화하는 내부자의 논리
- 비평가/활동가 캐릭터의 한계와 좌절
```

### 3-3: `references/cr-knowledge/03-problematic-patterns.md`
```markdown
# 문제적 보도 패턴: 119개 유형

## 8대 카테고리 개요

| 카테고리 | 핵심 문제 |
|----------|-----------|
| 1. 진실성과 정확성 | 사실 검증 부실, 오보, 추측 보도 |
| 2. 투명성과 책임성 | 출처 불명, 이해충돌 미공개 |
| 3. 균형성과 공정성 | 일방적 보도, 프레이밍 |
| 4. 독립성과 자율성 | 보도자료 받아쓰기, 광고주 영향 |
| 5. 인권과 프라이버시 | 피해자 신상 노출, 2차 가해 |
| 6. 전문성과 심층성 | 피상적 보도, 맥락 부재 |
| 7. 언어와 표현의 윤리 | 선정적 표현, 혐오 조장 |
| 8. 디지털 환경의 윤리 | 어뷰징, 낚시성 제목 |

---

## 구체적 패턴 (소설 디테일용)

### 사실 검증 부실

**교차 검증 부재**
- '투 소스 룰' 무시: 중대 사안에 최소 둘 이상의 독립적 취재원 확인 원칙 위반
- 반론권 미보장: 피의자/피고인의 해명 기회 없이 수사기관 발표만 보도

**익명 단일 취재원 의존**
- "정부 고위 관계자에 따르면..."
- "사정 당국자는..."
- 누구인지, 판단 근거가 무엇인지 전혀 밝히지 않음

### 따옴표 저널리즘

**폭로성 발언의 무검증 인용**
- 정치인의 폭로를 검증 없이 헤드라인에 그대로 사용
- "취재원이 말했다"는 사실 ≠ "취재원이 말한 내용이 사실"

**따옴표로 책임 회피**
- 논란될 발언을 직접 인용구로 처리
- "취재원이 한 말을 전달했을 뿐"이라는 명분

한국 신문의 '직접 인용구 제목' 비율: **59%**
뉴욕타임스: **2.8%**

### 무주체 피동형 표현

소설에서 기자 캐릭터가 쓰는 관행적 표현:
- "~로 알려졌다"
- "~로 전해졌다"
- "~로 풀이된다"
- "~라는 관측이다"
- "~할 것으로 보인다"

→ 책임 소재를 모호하게 만드는 표현

### 의견의 사실화

**부정적 낙인찍기 용어**
- 졸속, 꼼수, 몽니, 생떼, 망신
- "뭇매를 맞다", "철퇴를 맞다", "찬물을 끼얹었다"

**기자 사견의 사실화**
- "~에 급급했다"
- "~로 전락했다"
- "~는 부적절하다"

### 이차 자료 의존

**보도자료 받아쓰기**
- 정부/기업 보도자료를 검증 없이 그대로 기사화
- 언론을 감시자가 아닌 '홍보 대행사'로 전락시킴

**통신사 기사 무비판적 전재**
- 연합뉴스 기사를 별도 검증 없이 자사 기사로 게재
- 통신사의 편향이 전국 언론으로 동시 확산

### 온라인 기사 몰래 수정

- 오류 발견 시 정정 공지 없이 슬쩍 수정
- 독자는 수정 사실 자체를 알 수 없음
- 오보 자체를 입증할 방법이 없어짐

---

## 소설적 활용

- 기자가 마감에 쫓겨 "~로 알려졌다"를 습관적으로 쓰는 장면
- 데스크가 "따옴표 처리하면 돼"라고 지시하는 장면
- 보도자료를 거의 그대로 옮기며 자괴감을 느끼는 장면
- 정정 보도를 최소화하려는 편집국 논의 장면
- 온라인 기사를 몰래 수정하는 야근 장면
```

### 3-4: `references/cr-knowledge/04-citizen-solution.md`
```markdown
# 시민 주도 해결책: CR의 비전

## 핵심 제안

> 언론 바깥에서 기사라는 언론상품의 품질을 평가하고 공유하는 플랫폼.
> 언론 안팎으로 누구도 이의를 제기할 수 없는 엄정한 기준에 따라 
> 기사의 품질을 분석하고, 그 결과를 공유하는 시스템.

## 왜 "언론윤리규범"인가

핵심 통찰:
**언론인들이 스스로 만든 규범을 기준으로 삼는다.**

- 한국기자협회 윤리강령
- 신문윤리강령
- 인권보도준칙
- 방송심의규정
- 등등...

이 규범들은 언론계가 스스로 정한 것이므로,
언론사들이 "외부의 검열"이라고 반박하기 어렵다.

## 점수화 없는 접근

CR은 기사에 점수를 매기지 않습니다.

**왜?**
- 점수는 복잡한 저널리즘 현상을 단일 숫자로 단순화
- "좋은/나쁜 기사" 이분법의 위험
- 기사를 소비자 상품처럼 등급화하는 함정

**대신:**
- 판결문 스타일의 분석
- 어떤 표현이 어떤 규범에 비추어 문제인지 구체적으로 제시
- 왜 그것이 문제인지 설명

예시:
> "본 기사의 3번째 문단에 사용된 '~로 알려졌다'는 무주체 피동형 표현은 
> 한국기자협회 윤리강령 제3조 '정확한 보도' 중 
> '취재원을 명시적으로 밝혀 보도의 책임성과 투명성을 높인다'는 원칙에 부합하지 않음."

## 교육적 가치

CR의 목표는 평가가 아니라 **교육**입니다.

- 시민: 왜 특정 보도 관행이 문제인지 이해
- 기자: 구체적이고 실행 가능한 개선 방향 확인
- 사회: 미디어 리터러시 능력 향상

## 시민 참여의 의미

독자들이 주체가 되어 언론을 감시하고 견제하는 새로운 움직임.

> "이 기사는 어떤 보도 가치가 있지?"
> "누구에게 어떤 효용이 있는 거지?"
> "이 주장의 출처는 어디이고, 누구의 목소리지?"

이러한 질문을 던지며 개별 기사의 오류를 짚어내고,
기자와 언론사에 실질적인 압력으로 작용하게 하는 것.

## 궁극적 비전

> "기술은 단순한 도구가 아니라 사회를 재구성하는 힘이어야 합니다.
> 시민들이 그 힘으로 더 나은 사회를 상상하고, 또 발명할 수 있기를 희망합니다."

---

## 소설적 활용

- 직접 CR을 등장시키지 않더라도:
  - "누군가 이런 도구를 만든다면..." 하는 암시
  - 시민이 기사에 질문을 던지는 장면
  - 언론윤리규범의 존재를 알게 되는 순간
  - "그들이 스스로 정한 규칙조차 안 지키잖아"라는 대사

- 열린 결말로:
  - 문제를 인식한 주인공
  - 아직 해결책은 없지만, 질문은 남아있음
  - 독자가 "그래서 어떻게 해야 하지?"를 스스로 묻게 함
```

---

## 작업 4: `workflow/run.py` 수정

파일 상단에 프로젝트 컨텍스트 로딩 로직을 추가하세요.

### 4-1: 상수 추가
```python
# ============================================
# 프로젝트 컨텍스트 설정
# ============================================

PROJECT_CONTEXT_PATH = "project_context.md"
CR_KNOWLEDGE_PATH = "references/cr-knowledge/"
```

### 4-2: 컨텍스트 로딩 메서드 추가
```python
def load_project_context(self) -> str:
    """프로젝트 컨텍스트 로드 (모든 에이전트 공유)"""
    import os
    context_path = os.path.join(self.workflow_dir, PROJECT_CONTEXT_PATH)
    if os.path.exists(context_path):
        with open(context_path, 'r', encoding='utf-8') as f:
            return f.read()
    return ""

def load_cr_knowledge(self, filename: str) -> str:
    """CR 지식 베이스에서 특정 파일 로드 (선택적)"""
    import os
    knowledge_path = os.path.join(self.workflow_dir, CR_KNOWLEDGE_PATH, filename)
    if os.path.exists(knowledge_path):
        with open(knowledge_path, 'r', encoding='utf-8') as f:
            return f.read()
    return ""

def load_all_cr_knowledge(self) -> str:
    """CR 지식 베이스 전체 로드 (리서처용)"""
    import os
    knowledge_dir = os.path.join(self.workflow_dir, CR_KNOWLEDGE_PATH)
    if not os.path.exists(knowledge_dir):
        return ""
    
    all_knowledge = []
    for filename in sorted(os.listdir(knowledge_dir)):
        if filename.endswith('.md'):
            filepath = os.path.join(knowledge_dir, filename)
            with open(filepath, 'r', encoding='utf-8') as f:
                all_knowledge.append(f"## {filename}\n\n{f.read()}")
    return "\n\n---\n\n".join(all_knowledge)
```

### 4-3: `run_agent` 메서드 수정

기존 `run_agent` 메서드를 찾아 프로젝트 컨텍스트를 자동 주입하도록 수정하세요:
```python
def run_agent(self, agent_name: str, user_prompt: str, context: dict) -> str:
    """에이전트 실행 (프로젝트 컨텍스트 자동 주입)"""
    
    # 에이전트 지침서 로드
    agent_instructions = self.load_agent_instructions(agent_name)
    
    # 프로젝트 컨텍스트 로드 (모든 에이전트 공유)
    project_context = self.load_project_context()
    
    # 시스템 프롬프트 구성
    system_prompt = f"""
{agent_instructions}

---

# 프로젝트 컨텍스트 (필독)

{project_context}
"""
    
    # API 호출 (기존 로직 유지)
    # ...
```

### 4-4: 리서처 에이전트 수정

`run_researcher` 메서드에서 언론 도메인일 경우 CR 지식을 자동 로드하도록 수정:
```python
def run_researcher(self, user_input: str, domain: str, domain_refs: str = None) -> str:
    """리서처 에이전트: 페르소나 기반 도메인 지식 생성"""
    
    # 페르소나 프롬프트 생성
    persona_prompt = self.generate_persona_prompt(domain)
    
    # 언론 관련 도메인인 경우 CR 지식 자동 로드
    cr_knowledge = ""
    if "언론" in domain or "미디어" in domain or "기자" in domain:
        cr_knowledge = self.load_all_cr_knowledge()
        if cr_knowledge:
            cr_knowledge = f"\n\n## CR 프로젝트 참조 자료 (언론 현실 이해용)\n\n{cr_knowledge}"
    
    # (선택적) 추가 자료 로드
    ref_materials = ""
    if domain_refs:
        loaded = self.load_domain_materials(domain_refs)
        if loaded:
            ref_materials = f"\n\n## 추가 참고 자료\n{loaded}"
    
    # 컨텍스트 구성
    full_prompt = f"""
{persona_prompt}

## 소설 소재
{user_input}
{cr_knowledge}
{ref_materials}
"""
    
    result = self.run_agent("researcher", full_prompt, {})
    self.save_output("00-domain_knowledge.md", result)
    print(f"  → 00-domain_knowledge.md 저장됨")
    return result
```

---

## 작업 5: 오케스트레이션 가이드 업데이트

`agents/00-orchestration.md` 파일 상단에 다음 섹션을 추가하세요:
```markdown
## 프로젝트 컨텍스트

이 소설 창작 시스템은 CR(Checking the News Reliability) 프로젝트의 일환입니다.

### 핵심 원칙
- 모든 에이전트는 `project_context.md`를 작업 전 참조합니다
- CR을 직접 홍보하지 않고, 서사를 통해 공감을 이끌어냅니다
- 설교가 아닌 질문을, 답이 아닌 여운을 남깁니다

### 상세 참조 자료
언론 관련 도메인 작업 시 `references/cr-knowledge/` 폴더의 자료를 참조할 수 있습니다:
- `01-problem-awareness.md`: 문제의식
- `02-journalism-reality.md`: 언론 현실
- `03-problematic-patterns.md`: 문제적 보도 패턴 (119개)
- `04-citizen-solution.md`: 시민 주도 해결책
```

---

## 완료 확인
```bash
# 1. 파일 구조 확인
ls -la workflow/project_context.md
ls -la workflow/references/cr-knowledge/

# 2. 언론 도메인 테스트
echo "내부고발을 결심한 기자의 이야기" > test_journalism.txt
python run.py --input test_journalism.txt --domain "언론/탐사보도"

# 3. 도메인 지식에 CR 참조가 포함되었는지 확인
cat outputs/00-domain_knowledge.md | head -100

# 4. 프로젝트 컨텍스트가 에이전트에 주입되는지 확인
# (로그에서 "프로젝트 컨텍스트 로드됨" 메시지 확인)
```

---

## 요약

| 파일 | 역할 | 접근 방식 |
|------|------|----------|
| `project_context.md` | 핵심 철학 (1-2페이지) | 모든 에이전트 자동 주입 |
| `01-problem-awareness.md` | 문제의식 | 선택적 참조 |
| `02-journalism-reality.md` | 언론 현실 | 선택적 참조 |
| `03-problematic-patterns.md` | 119개 패턴 | 선택적 참조 |
| `04-citizen-solution.md` | 시민 해결책 | 선택적 참조 |

**언론 도메인 작업 시**: CR 지식 베이스가 자동으로 리서처에게 제공됩니다.
**다른 도메인 작업 시**: 프로젝트 컨텍스트만 공유되고, CR 상세 자료는 로드되지 않습니다.
